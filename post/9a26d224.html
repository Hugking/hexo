<!-- build time:Sat Apr 18 2020 02:24:52 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>商城系统项目搭建 | wkaanig的个人博客 | Hugking</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#3F51B5"><meta name="keywords" content="Flask,商城"><meta name="description" content="基于 python flask 开发网上商城详细步骤"><meta name="keywords" content="Flask,商城"><meta property="og:type" content="article"><meta property="og:title" content="商城系统项目搭建"><meta property="og:url" content="http://blog.wkaanig.cn/post/9a26d224.html"><meta property="og:site_name" content="wkaanig的个人博客"><meta property="og:description" content="基于 python flask 开发网上商城详细步骤"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-04-17T18:22:25.550Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="商城系统项目搭建"><meta name="twitter:description" content="基于 python flask 开发网上商城详细步骤"><link rel="alternate" type="application/atom+xml" title="wkaanig的个人博客" href="/atom.xml"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css"><script>window.lazyScripts=[]</script></head><body><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.jpg)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/avatar.jpg"></a><hgroup class="introduce"><h5 class="nickname">wkaanig</h5><a href="mailto:15670813638@163.com" title="15670813638@163.com" class="mail">15670813638@163.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> 主页</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> 归档</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> 标签</a></li><li class="waves-block waves-effect"><a href="/categories"><i class="icon icon-lg icon-th-list"></i> 分类</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">商城系统项目搭建</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i> </a><input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"><i class="icon icon-lg icon-share-alt"></i></a></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">商城系统项目搭建</h1><h5 class="subtitle"><time datetime="2019-09-10T12:32:49.035Z" itemprop="datePublished" class="page-time">2019-09-10</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python/">Python</a></li></ul></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#准备环境"><span class="post-toc-number">1.</span> <span class="post-toc-text">准备环境</span></a></li></ol><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#mysql-踩坑"><span class="post-toc-number"></span> <span class="post-toc-text">mysql 踩坑</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用-vscode-连接-mysql-时出现报错"><span class="post-toc-number">0.1.</span> <span class="post-toc-text">用 vscode 连接 mysql 时出现报错</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#搭建项目目录"><span class="post-toc-number"></span> <span class="post-toc-text">搭建项目目录</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#简单测试"><span class="post-toc-number"></span> <span class="post-toc-text">简单测试</span></a></li></nav></aside><article id="post-商城系统项目搭建" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">商城系统项目搭建</h1><div class="post-meta"><time class="post-time" title="2019-09-10 20:32:49" datetime="2019-09-10T12:32:49.035Z" itemprop="datePublished">2019-09-10</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Python/">Python</a></li></ul></div><div class="post-content" id="post-content" itemprop="postContent"><h2 id="准备环境"><a class="markdownIt-Anchor" href="#准备环境"></a> 准备环境</h2><ol><li>使用 python3 创建虚拟环境</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv py3venv <span class="comment">#创建一个py3venv的虚拟环境</span></span><br></pre></td></tr></table></figure><ol start="2"><li>激活虚拟环境</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ./py3venv/bin/activate</span><br></pre></td></tr></table></figure><ol start="3"><li>创建项目目录</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir shop</span><br></pre></td></tr></table></figure><ol start="4"><li>为项目 shop 安装依赖</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> shop</span><br></pre></td></tr></table></figure><ol start="5"><li>安装和卸载包</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install flask <span class="comment"># 安装包</span></span><br><span class="line">pip uinstall flask <span class="comment"># 卸载包</span></span><br></pre></td></tr></table></figure><ol start="6"><li>退出虚拟环境</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate: 退出虚拟环境</span><br></pre></td></tr></table></figure><ol start="7"><li>初始化环境安装依赖</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt;requirements.txt <span class="comment">#生成全部依赖 requirements.txt用来记录项目所有的依赖包和版本号，只需要一个简单的pip命令就能完成。</span></span><br><span class="line">pip install -r requirements.txt <span class="comment">#安装全部依赖</span></span><br></pre></td></tr></table></figure><p><code>requirements.txt</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">flask</span><br><span class="line">flask-sqlalchemy</span><br><span class="line">flask-debugtoolbar</span><br><span class="line">mysqlclient</span><br><span class="line">flask_script</span><br><span class="line">requests</span><br><span class="line">uwsgi <span class="comment">#Linux部署用，window会无法安装</span></span><br></pre></td></tr></table></figure><p><code>环境（application.py）</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ops_config=base <span class="comment">#基本环境</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ops_config=<span class="built_in">local</span> <span class="comment">#本地环境</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ops_config=production <span class="comment">#生产环境</span></span><br></pre></td></tr></table></figure><h1 id="mysql-踩坑"><a class="markdownIt-Anchor" href="#mysql-踩坑"></a> mysql 踩坑</h1><h3 id="用-vscode-连接-mysql-时出现报错"><a class="markdownIt-Anchor" href="#用-vscode-连接-mysql-时出现报错"></a> <strong>用 vscode 连接 mysql 时出现报错</strong></h3><figure class="highlight plain"><figcaption><span>ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### **_node 使用 mysql 报错_**</span><br><span class="line"></span><br><span class="line">原因：登录数据库的客户端跟 mysql8.0 不兼容了，mysql8.0 密码认证采用了新的密码格式</span><br><span class="line"></span><br><span class="line">解决办法：在系统 mysql 终端输入下面命令</span><br><span class="line"></span><br><span class="line">```mysql</span><br><span class="line">//password 是你的数据库账户密码，root和host也是</span><br><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED WITH mysql_native_password BY &apos;password&apos;;</span><br></pre></td></tr></table></figure><h1 id="搭建项目目录"><a class="markdownIt-Anchor" href="#搭建项目目录"></a> 搭建项目目录</h1><ol><li>创建项目根目录 shop</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir shop</span><br></pre></td></tr></table></figure><ol start="2"><li>在 shop 目录下创建包 config 用来管理配置文件</li></ol><p>通用配置文件<code>config/base_setting.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line">SERVER_PORT = <span class="number">5000</span></span><br><span class="line">DEBUG = <span class="literal">False</span></span><br><span class="line">SQLALCHEMY_ECHO = <span class="literal">False</span></span><br></pre></td></tr></table></figure><ol start="3"><li>本地配置文件</li></ol><p><code>config/local_setting.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line">DEBUG = <span class="literal">True</span></span><br><span class="line">SQLALCHEMY_ECHO = <span class="literal">True</span></span><br><span class="line">SQLALCHEMY_DATABASE_URI = <span class="string">'mysql://root:mysql@127.0.0.1/mysql?charset=utf8mb4'</span></span><br><span class="line">SQLALCHEMY_TRACK_MODIFICATIONS = <span class="literal">False</span></span><br><span class="line">SQLALCHEMY_ENCODING = <span class="string">"utf8mb4"</span></span><br></pre></td></tr></table></figure><ol start="4"><li>生产配置文件</li></ol><p><code>config/production_setting.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><ol start="5"><li>在 shop 目录下创建 <a href="http://application.py" target="_blank" rel="noopener">application.py</a> 封装 flask 的全局变量</li></ol><p><code>application.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLAlchemy</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Application</span><span class="params">( Flask )</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,import_name)</span>:</span></span><br><span class="line">        super( Application,self ).__init__( import_name )</span><br><span class="line">        self.config.from_pyfile( <span class="string">'config/base_setting.py'</span> )</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"ops_config"</span> <span class="keyword">in</span> os.environ:</span><br><span class="line">            self.config.from_pyfile( <span class="string">'config/%s_setting.py'</span>%os.environ[<span class="string">'ops_config'</span>] )</span><br><span class="line"></span><br><span class="line">        db.init_app( self )</span><br><span class="line"></span><br><span class="line">db = SQLAlchemy()</span><br><span class="line">app = Application( __name__ )</span><br><span class="line">manager = Manager( app )</span><br></pre></td></tr></table></figure><ol start="6"><li>在 shop 目录下创建 <a href="http://www.py" target="_blank" rel="noopener">www.py</a> 封装 HTTP 相关初始化</li></ol><p><code>www.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line"><span class="keyword">from</span> application <span class="keyword">import</span> app</span><br><span class="line"><span class="keyword">from</span> web.controllers.index <span class="keyword">import</span> route_index</span><br><span class="line"></span><br><span class="line">app.register_blueprint( route_index,url_prefix = <span class="string">"/"</span> )</span><br></pre></td></tr></table></figure><ol start="7"><li>在 shop 目录下创建 <a href="http://manager.py" target="_blank" rel="noopener">manager.py</a> 启动入口</li></ol><p><code>manager.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br><span class="line"><span class="keyword">from</span> application <span class="keyword">import</span> app,manager</span><br><span class="line"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Server</span><br><span class="line"><span class="keyword">import</span> www</span><br><span class="line"></span><br><span class="line"><span class="comment">##web server</span></span><br><span class="line">manager.add_command( <span class="string">"runserver"</span>, Server( host=<span class="string">'0.0.0.0'</span>,port=app.config[<span class="string">'SERVER_PORT'</span>],use_debugger = <span class="literal">True</span> ,use_reloader = <span class="literal">True</span>) )</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    manager.run()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">import</span> sys</span><br><span class="line">        sys.exit( main() )</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">import</span> traceback</span><br><span class="line">        traceback.print_exc()</span><br></pre></td></tr></table></figure><ol start="8"><li>在 shop 目录下创建 <a href="http://readme.md" target="_blank" rel="noopener">readme.md</a></li></ol><p><code>readme.md</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Python Flask 商城系统</span><br><span class="line">=====================</span><br><span class="line"><span class="comment">##启动</span></span><br><span class="line">* export ops_config=local|production &amp;&amp; python manage.py runserver</span><br><span class="line"></span><br><span class="line"><span class="comment">##flask-sqlacodegen</span></span><br><span class="line"></span><br><span class="line">    flask-sqlacodegen <span class="string">'mysql://root:password@127.0.0.1/shop_db'</span> --outfile <span class="string">"common/models/model.py"</span>  --flask</span><br><span class="line">    flask-sqlacodegen <span class="string">'mysql://root:password@127.0.0.1/shop_db'</span> --tables user --outfile <span class="string">"common/models/user.py"</span>  --flask</span><br><span class="line"></span><br><span class="line"><span class="comment">## 所见即所得编辑器ueditor</span></span><br><span class="line"></span><br><span class="line">    &lt;script src="&#123;&#123; buildStaticUrl('/plugins/ueditor/ueditor.config.js') &#125;&#125;"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src="&#123;&#123; buildStaticUrl('/plugins/ueditor/ueditor.all.min.js') &#125;&#125;"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src="&#123;&#123; buildStaticUrl('/plugins/ueditor/lang/zh-cn/zh-cn.js') &#125;&#125;"&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    UE.getEditor(<span class="string">'editor'</span>,&#123;</span><br><span class="line">       toolbars: [</span><br><span class="line">            [ <span class="string">'undo'</span>, <span class="string">'redo'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'bold'</span>, <span class="string">'italic'</span>, <span class="string">'underline'</span>, <span class="string">'strikethrough'</span>, <span class="string">'removeformat'</span>, <span class="string">'formatmatch'</span>, <span class="string">'autotypeset'</span>, <span class="string">'blockquote'</span>, <span class="string">'pasteplain'</span>, <span class="string">'|'</span>, <span class="string">'forecolor'</span>, <span class="string">'backcolor'</span>, <span class="string">'insertshopedlist'</span>, <span class="string">'insertunshopedlist'</span>, <span class="string">'selectall'</span>,  <span class="string">'|'</span>,<span class="string">'rowspacingtop'</span>, <span class="string">'rowspacingbottom'</span>, <span class="string">'lineheight'</span>],</span><br><span class="line">            [ <span class="string">'customstyle'</span>, <span class="string">'paragraph'</span>, <span class="string">'fontfamily'</span>, <span class="string">'fontsize'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'directionalityltr'</span>, <span class="string">'directionalityrtl'</span>, <span class="string">'indent'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'justifyleft'</span>, <span class="string">'justifycenter'</span>, <span class="string">'justifyright'</span>, <span class="string">'justifyjustify'</span>, <span class="string">'|'</span>, <span class="string">'touppercase'</span>, <span class="string">'tolowercase'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'link'</span>, <span class="string">'unlink'</span>],</span><br><span class="line">            [ <span class="string">'imagenone'</span>, <span class="string">'imageleft'</span>, <span class="string">'imageright'</span>, <span class="string">'imagecenter'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'insertimage'</span>, <span class="string">'insertvideo'</span>, <span class="string">'|'</span>,</span><br><span class="line">                <span class="string">'horizontal'</span>, <span class="string">'spechars'</span>,<span class="string">'|'</span>,<span class="string">'inserttable'</span>, <span class="string">'deletetable'</span>, <span class="string">'insertparagraphbeforetable'</span>, <span class="string">'insertrow'</span>, <span class="string">'deleterow'</span>, <span class="string">'insertcol'</span>, <span class="string">'deletecol'</span>, <span class="string">'mergecells'</span>, <span class="string">'mergeright'</span>, <span class="string">'mergedown'</span>, <span class="string">'splittocells'</span>, <span class="string">'splittorows'</span>, <span class="string">'splittocols'</span> ]</span><br><span class="line"></span><br><span class="line">        ],</span><br><span class="line">        enableAutoSave:true,</span><br><span class="line">        saveInterval:<span class="number">60000</span>,</span><br><span class="line">        elementPathEnabled:false,</span><br><span class="line">        zIndex:<span class="number">4</span>,</span><br><span class="line">        serverUrl:common_ops.buildUrl(  <span class="string">'/upload/ueditor'</span> )</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">##可参考资料</span></span><br><span class="line">* [python-Flask（jinja2）语法：过滤器](https://www.jianshu.com/p/<span class="number">3127</span>ac233518)</span><br><span class="line">* [SQLAlchemy 各种查询语句写法](https://wxnacy.com/<span class="number">2017</span>/<span class="number">08</span>/<span class="number">14</span>/python<span class="number">-2017</span><span class="number">-08</span><span class="number">-14</span>-sqlalchemy-filter/)</span><br></pre></td></tr></table></figure><ol start="9"><li>在 shop 目录下创建 requirements.txt</li></ol><p><code>requirements.txt</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flask</span><br><span class="line">flask-sqlalchemy</span><br><span class="line">flask-debugtoolbar</span><br><span class="line">mysqlclient</span><br><span class="line">flask_script</span><br><span class="line">requests</span><br></pre></td></tr></table></figure><ol start="10"><li>在 shop 目录下创建 common 包 存放公用部分</li></ol><p><code>common/__init__.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><p><code>common/libs/__init__.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><p><code>common/models/__init__.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><ol start="11"><li>在 shop 目录下创建 doc 目录 存放存放文档</li></ol><p><code>doc/mysql.md</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数据库变更记录</span><br><span class="line">==================</span><br></pre></td></tr></table></figure><ol start="12"><li>在 shop 目录下创建 jobs 包 用来存放一些定时的任务</li></ol><p><code>jobs/__init__.py_</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><p><code>jobs/task/__init__.py_</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><ol start="13"><li>在 shop 目录下创建 web 包用来存放蓝图</li></ol><p><code>web/__init__.py</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><p><code>web/controllers/index.py</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Blueprint</span><br><span class="line"></span><br><span class="line">route_index = Blueprint( <span class="string">'index_page'</span>,__name__ )</span><br><span class="line"></span><br><span class="line"><span class="meta">@route_index.route("/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello'</span></span><br></pre></td></tr></table></figure><p><code>web/controllers/__init__.py</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -- coding: utf-8 --</span></span><br></pre></td></tr></table></figure><h1 id="简单测试"><a class="markdownIt-Anchor" href="#简单测试"></a> 简单测试</h1><ol><li>在终端添加环境变量</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ops_config=<span class="built_in">local</span></span><br></pre></td></tr></table></figure><ol start="2"><li>启动项目</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure><ol start="3"><li>输入测试 url</li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//127.0.0.1:5000/</span></span><br></pre></td></tr></table></figure></div><blockquote class="post-copyright"><div class="content"><span class="post-time">最后更新时间：<time datetime="2020-04-17T18:22:25.550Z" itemprop="dateUpdated">2020-04-18 02:22:25</time></span><br>本文遵循CCBY-NC-SA4.0许可协议，本文链接：<a href="/post/9a26d224.html" target="_blank" rel="external">http://blog.wkaanig.cn/post/9a26d224.html</a></div><footer><a href="http://blog.wkaanig.cn"><img src="/img/avatar.jpg" alt="wkaanig"> wkaanig</a></footer></blockquote><div class="post-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flask/">Flask</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/商城/">商城</a></li></ul><div class="page-share-wrap"><div class="page-share" id="pageShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.wkaanig.cn/post/9a26d224.html&title=《商城系统项目搭建》 — wkaanig的个人博客&pic=http://blog.wkaanig.cn/img/avatar.jpg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.wkaanig.cn/post/9a26d224.html&title=《商城系统项目搭建》 — wkaanig的个人博客&source=相信奇迹的人本身就和奇迹一样了不起" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.wkaanig.cn/post/9a26d224.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《商城系统项目搭建》 — wkaanig的个人博客&url=http://blog.wkaanig.cn/post/9a26d224.html&via=http://blog.wkaanig.cn" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.wkaanig.cn/post/9a26d224.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"><i class="icon icon-share-alt icon-lg"></i></a></div></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/post/7601b0d2.html" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div><h4 class="title">Python-Flask 使用 Sqlacodegen 从数据库表生成model.py</h4></a></div><div class="waves-block waves-effect next"><a href="/post/f9a25cd7.html" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">操作系统引论</h4></a></div></nav><div class="comments vcomment" id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(e){return GUEST_INFO.indexOf(e)>-1});new Valine({el:"#comments",notify:!0,verify:!1,appId:"",appKey:"",avatar:"mm",placeholder:"Just so so",guest_info:0==guest_info.length?GUEST_INFO:guest_info,pageSize:"10"})</script></article></div><footer class="footer"><div class="top"><p><span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span> <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span></p></div><div class="bottom"><p><span>wkaanig &copy; 2016 - 2020</span> <span><a href="http://www.miitbeian.gov.cn/" target="_blank">豫ICP备19008566号</a><br>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><div class="global-share" id="globalShare"><ul class="reset share-icons"><li><a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.wkaanig.cn/post/9a26d224.html&title=《商城系统项目搭建》 — wkaanig的个人博客&pic=http://blog.wkaanig.cn/img/avatar.jpg" data-title="微博"><i class="icon icon-weibo"></i></a></li><li><a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"><i class="icon icon-weixin"></i></a></li><li><a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.wkaanig.cn/post/9a26d224.html&title=《商城系统项目搭建》 — wkaanig的个人博客&source=相信奇迹的人本身就和奇迹一样了不起" data-title=" QQ"><i class="icon icon-qq"></i></a></li><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.wkaanig.cn/post/9a26d224.html" data-title=" Facebook"><i class="icon icon-facebook"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《商城系统项目搭建》 — wkaanig的个人博客&url=http://blog.wkaanig.cn/post/9a26d224.html&via=http://blog.wkaanig.cn" data-title=" Twitter"><i class="icon icon-twitter"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.wkaanig.cn/post/9a26d224.html" data-title=" Google+"><i class="icon icon-google-plus"></i></a></li></ul></div><div class="page-modal wx-share" id="wxShare"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><p>扫一扫，分享到微信</p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABx0lEQVR42u3awW6EMAxF0fn/n6bbSjOF++w40NHNqqKUnLKw8ItfL7yOX+v9Crl+/rTFS65cuW3ucbo44q8nn+/CDXLlyt3PJZuRR78/7fw6N8iVK/fJXL4ZKWpy5cr9Ji5vih5RyOTKlVvikuaEByKkYI33anLlym1wawHH2p9H8l25cuWWuEe4VhWjo7TkypW7h5uGGkGLgqtQvK9cuXKHueTP0mLEByxI1PLhvcqVK3eYS45J+ONIJNpZcuXKfQ6Xs2pjGfGLkCtX7hZuOmBRy2X7AYpcuXL3cHkwkR6u8Mg1eDVy5crdzq2FGhyRtlUXhUyuXLlj3FoIErQoIHKNX4RcuXKHufxTI72nH5ii5keuXLkDXD5awVOW2oFr0HrJlSv3Ji4fueiMaJCyiAqZXLlyh7m8VKVDWuk410WvJleu3Ju4/MPl/B9e8FmTzmjIlSu3wV0WVYTNErlTrly5d3HT4pJuVhu54JGNXLly57jpAWpayNKQ5eK3cuXK3cjtH6aS6rjgHrly5T6eWwtDeeslV67c/8LttEC1wLT1iSNXrtwGtx+S8kaIfB4Fh6xy5cod4HYOPvk2fMyCvya5cuUOcH8ASda5aAtMIY4AAAAASUVORK5CYII=" alt="微信分享二维码"></div><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!1};lazyScripts.push("//s95.cnzz.com/z_stat.php?id=1278824305&web_id=1278824305")</script><script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});</script><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>!function(){var t,e=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="死鬼去哪里了！",clearTimeout(t)):(document.title="(つェ⊂)咦!又好了!",t=setTimeout(function(){document.title=e},2e3))})}()</script></body></html><!-- rebuild by neat -->